<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ‘»åŒç¾©è©ã®é¬¼ğŸ‘»</title>
<link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icon.png">
<link rel="apple-touch-icon" href="icon.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0a9396">
    
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

    <style>
        /* --- åŸºç¤è¨­å®š --- */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f2f5;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        h1 { color: #2c3e50; margin-bottom: 5px; }
        p { color: #7f8c8d; margin-bottom: 20px; font-size: 0.9rem; }
        
        /* ç‹€æ…‹åˆ— */
        .info-panel {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            font-size: 1.1rem;
            color: #34495e;
            font-weight: bold;
            background: white;
            padding: 10px 25px;
            border-radius: 50px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            align-items: center;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* ç”¨æˆ¶æ­¡è¿å€ */
        .user-panel {
            background: #dff9fb; color: #2c3e50; 
            padding: 5px 15px; border-radius: 20px; font-size: 0.9rem;
            display: flex; gap: 10px; align-items: center;
            border: 1px solid #b2bec3;
        }
        .logout-btn {
            background: none; border: none; color: #e74c3c; 
            cursor: pointer; text-decoration: underline; font-size: 0.85rem;
        }

        .stat-box { display: flex; align-items: center; gap: 6px; white-space: nowrap;}
        .score-box { color: #2980b9; }
        
        #lives { color: #e74c3c; transition: all 0.3s; }
        .low-health { animation: pulse-red 0.8s infinite; }

        @keyframes pulse-red {
            0% { text-shadow: 0 0 0 rgba(231, 76, 60, 0); transform: scale(1); }
            50% { text-shadow: 0 0 10px rgba(231, 76, 60, 0.5); transform: scale(1.1); }
            100% { text-shadow: 0 0 0 rgba(231, 76, 60, 0); transform: scale(1); }
        }

        /* --- éŠæˆ²ç¶²æ ¼ --- */
        .game-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            max-width: 680px;
            width: 100%;
        }

        /* --- å¡ç‰‡æ¨£å¼ --- */
        .card {
            background-color: transparent;
            height: 120px;
            perspective: 1000px;
            cursor: pointer;
            user-select: none;
        }

        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s cubic-bezier(0.4, 0.2, 0.2, 1);
            transform-style: preserve-3d;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border-radius: 12px;
        }

        .card.flipped .card-inner { transform: rotateY(180deg); }
        .card.matched .card-inner { transform: rotateY(180deg); }
        
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            padding: 5px;
            box-sizing: border-box;
        }

        .card-back {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            z-index: 2;
            transition: font-size 0.3s ease;
            font-family: 'Courier New', Courier, monospace; 
            font-weight: bold;
        }

        .card-front {
            background-color: white;
            color: #333; 
            transform: rotateY(180deg);
            border: 2px solid #ddd; 
            font-weight: bold;
            z-index: 1;
        }

        .word-text { font-size: 1.1rem; margin-bottom: 8px; line-height: 1.2; }
        .long-text { font-size: 0.9rem; }

        .meaning-text {
            font-size: 0.9rem;
            opacity: 0; 
            transform: translateY(10px);
            transition: all 0.5s ease-out;
            font-weight: bold;
            color: inherit; 
            margin-top: 5px;
        }

        /* --- æŒ‰éˆ•å€åŸŸ --- */
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        button {
            padding: 12px 30px;
            font-size: 1rem; 
            border: none; border-radius: 50px; cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            font-weight: bold; transition: transform 0.2s;
            display: flex; align-items: center; gap: 8px;
        }
        button:hover { transform: translateY(-2px); }

        .btn-restart { background: #34495e; color: white; }
        .btn-study { background: #3498db; color: white; }
        .btn-rank { background: #f1c40f; color: #2c3e50; }

        /* --- å½ˆçª—é€šç”¨ --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
            display: flex; /* é è¨­é¡¯ç¤ºï¼Œç”± JS æ§åˆ¶ */
            justify-content: center; align-items: center;
            z-index: 1000;
            opacity: 1; transition: opacity 0.3s;
        }
        .modal-overlay.hidden { display: none; opacity: 0; }

        .modal-content {
            background: white;
            width: 90%; max-width: 500px;
            max-height: 85vh;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            overflow-y: auto;
            position: relative;
            text-align: center;
        }

        .modal-header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 20px; border-bottom: 2px solid #f0f0f0; padding-bottom: 10px;
        }
        .modal-title { font-size: 1.5rem; color: #333; font-weight: 800; }
        .close-btn { font-size: 2rem; cursor: pointer; color: #999; line-height: 1; }
        
        /* ç™»å…¥ä»‹é¢æ¨£å¼ */
        .login-box h2 { color: #2c3e50; margin-bottom: 10px; }
        .login-box p { color: #7f8c8d; margin-bottom: 20px; }
        .login-input {
            padding: 15px; width: 80%; font-size: 1.1rem; border: 2px solid #ddd;
            border-radius: 10px; margin-bottom: 15px; outline: none; text-align: center;
        }
        .login-input:focus { border-color: #3498db; }
        .btn-login { background: #3498db; color: white; width: 100%; margin-top: 10px; justify-content: center;}

        /* æ’è¡Œæ¦œè¡¨æ ¼ */
        .rank-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        .rank-table th { background: #f8f9fa; color: #7f8c8d; padding: 10px; font-size: 0.9rem; text-align: left; }
        .rank-table td { padding: 12px 10px; border-bottom: 1px solid #eee; font-size: 1.1rem; text-align: left; }
        .rank-row:nth-child(1) .rank-num { color: #f1c40f; font-weight: 900; font-size: 1.3rem; }
        .rank-row:nth-child(2) .rank-num { color: #bdc3c7; font-weight: bold; }
        .rank-row:nth-child(3) .rank-num { color: #e67e22; font-weight: bold; }
        .rank-name { font-weight: bold; color: #2c3e50; }
        .rank-score { font-family: 'Courier New', monospace; font-weight: bold; color: #2980b9; text-align: right !important; }

        /* æº«ç¿’è¡¨æ¨£å¼ */
        .study-grid { display: grid; gap: 15px; text-align: left; }
        .study-group { border: 1px solid #eee; border-radius: 12px; padding: 15px; background: #fafafa; border-left: 5px solid #ccc; }
        .study-meaning { font-size: 1.1rem; font-weight: bold; color: #333; margin-bottom: 8px; }
        .study-words { display: flex; flex-wrap: wrap; gap: 8px; }
        .study-tag { background: white; padding: 6px 14px; border-radius: 20px; border: 1px solid #eee; font-size: 0.95rem; color: #555; cursor: pointer; display: inline-flex; align-items: center; gap: 5px; }
/* --- å–®å­—é»æ“Šå‹•ç•« --- */
        @keyframes pop-effect {
            0% { transform: scale(1); }
            50% { transform: scale(1.15); background-color: #dff9fb; border-color: #3498db; box-shadow: 0 4px 10px rgba(52, 152, 219, 0.2); }
            100% { transform: scale(1); }
        }
        
        /* é€™å€‹ class æœƒç”± JS å‹•æ…‹åŠ å…¥ */
        .pop-active {
            animation: pop-effect 0.3s ease-out;
        }
        /* æœå°‹æ¬„æ¨£å¼ */
/* --- ğŸ” æœå°‹åŠŸèƒ½æ¨£å¼ (æ–°) --- */
        .search-trigger-icon {
            font-size: 1.5rem;
            cursor: pointer;
            margin-right: 15px; /* èˆ‡ X æŒ‰éˆ•ä¿æŒè·é›¢ */
            transition: transform 0.2s;
        }
        .search-trigger-icon:hover { transform: scale(1.2); }

        .search-bar-wrapper {
            max-height: 0; /* é è¨­éš±è— (é«˜åº¦ç‚º 0) */
            overflow: hidden;
            transition: max-height 0.3s ease-out; /* æ»‘å‹•å‹•ç•« */
            background: white;
            border-bottom: 1px solid #eee;
        }
        
        /* ç•¶æœå°‹æ¬„æ‰“é–‹æ™‚çš„ç‹€æ…‹ */
        .search-bar-wrapper.open {
            max-height: 70px; /* æ‰“é–‹çš„é«˜åº¦ */
        }

        .search-input {
            width: 90%;
            margin: 10px auto;
            display: block;
            padding: 10px 15px;
            font-size: 1rem;
            border: 2px solid #ddd;
            border-radius: 50px;
            outline: none;
        }
        .search-input:focus { border-color: #3498db; }
        .search-input {
            width: 100%;
            padding: 12px 15px;
            font-size: 1rem;
            border: 2px solid #ddd;
            border-radius: 50px;
            box-sizing: border-box;
            outline: none;
            transition: border-color 0.3s;
            background-color: #f8f9fa;
        }
        .search-input:focus {
            border-color: #3498db;
            background-color: #fff;
            box-shadow: 0 0 8px rgba(52, 152, 219, 0.2);
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-6px); }
            40%, 80% { transform: translateX(6px); }
        }
        .shake { animation: shake 0.4s; }

    </style>
</head>
<body>

    <h1>ğŸ‘»åŒç¾©è©ã®é¬¼ğŸ‘»</h1>
    <p>It's Dope!Just Another Level!</p>
    
    <div class="info-panel">
        <div class="user-panel" id="userPanel" style="display:none;">
            ğŸ‘¤ <span id="currentUserDisplay">Player</span>
            <button class="logout-btn" onclick="logout()">ç™»å‡º</button>
        </div>
        <div class="stat-box">LEVEL <span id="level-display">1</span></div>
        <div class="stat-box">â±ï¸ <span id="timer">100</span>s</div>
        <div class="stat-box"> <span id="lives">10</span></div> 
        <div class="stat-box score-box">ğŸ† Score: <span id="total-score">0</span></div>
    </div>

<div id="startOverlay" style="text-align: center; margin: 20px 0;">
        <h2 style="color: #2c3e50; margin-bottom: 15px;">æº–å‚™å¥½æ¥å—æŒ‘æˆ°äº†å—ï¼Ÿ</h2>
        <button onclick="startGameSession()" style="background: #e74c3c; color: white; padding: 15px 40px; font-size: 1.2rem; border-radius: 50px; border:none; cursor:pointer; box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4); font-weight:bold;">
            â–¶ é–‹å§‹éŠæˆ² (Start Game)
        </button>
    </div>

    <div class="game-grid" id="gameGrid"></div>

    <div class="action-buttons">
        <div id="preGameButtons" style="display: flex; gap: 15px;">
            <button class="btn-study" onclick="openStudyModal()">ğŸ“– æº«ç¿’è¡¨</button>
            <button class="btn-rank" onclick="openRankModal()">ğŸ‘‘ æ’è¡Œæ¦œ</button>
        </div>

<div id="inGameButtons" style="display: none; gap: 15px;">
            <button class="btn-restart" onclick="onGiveUp()">ğŸ³ï¸ æ”¾æ£„ & å›ä¸»é¸å–®</button>
        </div>
    </div>

    <div class="modal-overlay" id="loginModal">
        <div class="modal-content login-box">
            <h2>ğŸ‘‹ æº–å‚™å¥½åšåŒç¾©è©ã®é¬¼æœªï¼Ÿ</h2>
            <p>è«‹è¼¸å…¥ä½ çš„åå­—ä»¥é–‹å§‹éŠæˆ²<br>(å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ï¼Œç³»çµ±æœƒè‡ªå‹•è¨»å†Š)</p>
            <input type="text" id="loginNameInput" class="login-input" placeholder="ä¾‹å¦‚: Tom A" maxlength="12">
            <button class="btn-login" onclick="handleLogin()">é–‹å§‹éŠæˆ² (Start)</button>
            <p style="font-size: 0.8rem; margin-top: 15px; color: #95a5a6;">*è«‹ä½¿ç”¨ç¨ç‰¹çš„åå­—ï¼Œä¸èƒ½èˆ‡ä»–äººé‡è¤‡</p>
        </div>
    </div>

    <div class="modal-overlay hidden" id="rankModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">ğŸ‘»èª°æ˜¯é¬¼ç‹?ğŸ‘»</div>
                <div class="close-btn" onclick="closeModal('rankModal')">&times;</div>
            </div>
            
            <div id="loadingRank">è¼‰å…¥ä¸­...</div>
            <table class="rank-table" id="rankTable">
                <thead>
                    <tr><th width="15%">#</th><th>Player</th><th style="text-align: right;">Score</th></tr>
                </thead>
                <tbody id="rankListBody"></tbody>
            </table>
        </div>
    </div>

<div class="modal-overlay hidden" id="studyModal">
        <div class="modal-content">
            <div class="modal-header">
                <div style="display: flex; align-items: center;">
                    <div class="modal-title">Reading å¸¸è€ƒåŒç¾©å­—</div>
                </div>
                <div style="display: flex; align-items: center;">
                    <div class="search-trigger-icon" onclick="toggleSearchBar()">ğŸ”</div>
                    <div class="close-btn" onclick="closeModal('studyModal')">&times;</div>
                </div>
            </div>
            
            <div class="search-bar-wrapper" id="searchBarWrapper">
                <input type="text" id="studySearchInput" class="search-input" placeholder="è¼¸å…¥é—œéµå­— (ä¾‹å¦‚: sufficient)...">
            </div>

            <p style="color:#7f8c8d; margin-top:10px;">(é»æ“Šå–®å­—å¯ç™¼éŸ³ ğŸ”Š)</p>
            <div class="study-grid" id="studyListContainer"></div>
        </div>
    </div>

        <script>
        // --- 1. Firebase è¨­å®šèˆ‡åˆå§‹åŒ– ---
        const firebaseConfig = {
            apiKey: "AIzaSyBdfTgb7FpkYdgjvrYWQ0jr-N-1fAaW9Q0",
            authDomain: "vocabularyxdungeon.firebaseapp.com",
            databaseURL: "https://vocabularyxdungeon-default-rtdb.asia-southeast1.firebasedatabase.app/",
            projectId: "vocabularyxdungeon",
            storageBucket: "vocabularyxdungeon.appspot.com",
            messagingSenderId: "834761939928",
            appId: "1:834761939928:web:d0fde740639a3eca46f0ad"
        };
        
        let db = null;
        let currentPlayer = null; 
        
        try {
            if (!firebase.apps.length) {
                firebase.initializeApp(firebaseConfig);
            }
            db = firebase.database();
            console.log("Firebase initialized successfully");
        } catch (e) {
            alert("âŒ Firebase åˆå§‹åŒ–å¤±æ•—ï¼\néŒ¯èª¤: " + e.message);
        }

        const LEADERBOARD_PATH = 'leaderboards/synonym_hunter';
        const USERS_PATH = 'users'; 

        // --- 2. æ•¸æ“šåº« ---
        const synonymData = [
            { id: 'sufficient', color: 'lime', meaning: 'å……è¶³ / è¶³å¤ ', words: [{ t: 'Sufficient', m: 'è¶³å¤ ' }, { t: 'Adequate', m: 'è¶³å¤ ' }, { t: 'Ample', m: 'å……è¶³' }, { t: 'Abundant', m: 'å……è¶³' }, { t: 'plentiful', m: 'å……è¶³' }] },
            { id: 'shocking', color: 'red', meaning: 'ä»¤äººéœ‡é©š', words: ['Shocking', 'Astonishing', 'Astounding', 'Mind-blowing', 'Mind-boggling', 'Jaw-dropping', 'Striking'] },
            { id: 'means', color: 'blueviolet', meaning: 'æ–¹æ³•', words: ['Way', 'Method', 'Means', 'Approach'] },
            { id: 'resemble', color: 'gray', meaning: 'ç›¸ä¼¼', words: [{ t: 'Similar to', m: 'ç›¸ä¼¼(æ³›ç”¨)' }, { t: 'Akin to', m: 'ç›¸ä¼¼(æŠ½è±¡)' }, { t: 'Resemble', m: 'ç›¸ä¼¼(ç‰©ç†)' }, { t: 'Alike', m: 'å¥½ç›¸ä¼¼(æ”¾å¥å°¾)' }] },
            { id: 'strange', color: 'mediumorchid', meaning: 'å¥‡æ€ª', words: ['Strange', 'Odd', 'Weird', 'Bizarre', 'Eerie', 'Peculiar', 'Eccentric'] },
            { id: 'hamper', color: 'maroon', meaning: 'å¦¨ç¤™', words: ['Hamper', 'Hinder', 'Obstruct', 'Impede'] },
            { id: 'however', color: 'brown', meaning: 'ä½†æ˜¯/ç„¶è€Œ', words: ['However', 'Yet', 'Nevertheless', 'Nonetheless'] },
            { id: 'be that as it may', color: 'burlywood', meaning: 'è©±é›–å¦‚æ­¤', words: ['Be that as it may', 'That said', 'Having said that', 'With that said'] },
            { id: 'especially', color: 'burlywood', meaning: 'å°¤å…¶æ˜¯', words: ['Especially', 'Particularly', 'In particular'] },
            { id: 'specific', color: 'coral', meaning: 'ç‰¹å®š', words: ['Specific', 'Particular'] },
            { id: 'benefit', color: 'cadetblue', meaning: 'å¥½è™•', words: [{ t: 'Benefit', m: 'ç›Šè™•' }, { t: 'Merit', m: 'å„ªé»' }, { t: 'Pros', m: 'åˆ©(å¿…é ˆçœ¾æ•¸)' }, { t: 'Advantage', m: 'å„ªé»' }] },
            { id: 'drawback', color: 'chocolate', meaning: 'å£è™•', words: [{ t: 'Drawback', m: 'å¼Šè™•' }, { t: 'Demerit', m: 'ç¼ºé»' }, { t: 'Cons', m: 'å¼Š(å¿…é ˆçœ¾æ•¸)' }, { t: 'Disadvantage', m: 'ç¼ºé»' }] },
            { id: 'foster', color: 'green', meaning: 'ä¿ƒé€²', words: [{ t: 'Foster', m: 'ä¿ƒé€²' }, { t: 'Facilitate', m: 'ä¿ƒé€²' }, { t: 'Promote', m: 'ä¿ƒé€²' }] },
            { id: 'decrease', color: 'olive', meaning: 'æ¸›å°‘', words: [{ t: 'Decrease', m: 'æ¸›å°‘' }, { t: 'Dwindle', m: 'æ¸›å°‘' }, { t: 'Plunge', m: 'æ€¥è·Œ' }, { t: 'Slump', m: 'æ€¥è·Œ' }, { t: 'Sink', m: 'æ€¥è·Œ' }, { t: 'Decline', m: 'ä¸‹é™' },{ t: 'Plummet', m: 'æ€¥è·Œ' }, { t: 'Reduce ', m: 'æ¸›å°‘(+n)' }, { t: 'Lower ', m: 'æ¸›å°‘(+n)' }, { t: 'minimise ', m: 'æ¸›å°‘(+n)' }] },
            { id: 'staggering', color: 'yellow', meaning: 'å¤§(æ•¸å­—)', words: [{ t: 'Staggering', m: 'å¤§(æ•¸å­—)' }, { t: 'Whopping', m: 'å¤§(æ•¸å­—)' }] },
            { id: 'important', color: 'blue', meaning: 'é‡è¦', words: [{ t: 'Crucial', m: 'æ¥µé‡è¦' }, { t: 'Significant', m: 'é‡è¦' }, { t: 'Vital', m: 'å¿…ä¸å¯å°‘' }, { t: 'Indispensable', m: 'ä¸å¯æˆ–ç¼º' }, { t: 'Key', m: 'é—œéµæ€§çš„' }, { t: 'Critical ', m: 'é—œéµæ€§çš„' }] },
            { id: 'Cultivate', color: 'lime', meaning: 'åŸ¹è‚²', words: [{ t: 'Cultivate', m: 'åŸ¹é¤Š' }, { t: 'Nurture', m: 'å­•è‚²' }] },
            { id: 'instead of', color: 'purple', meaning: 'è€Œä¸æ˜¯', words: ['Instead of', 'Rather than', 'As opposed to'] }, // 
            { id: 'suffer from', color: 'fuchsia', meaning: 'æ‚£ä¸Š', words: ['Suffer from', 'Develop', 'Afflicted with'] }, 
            { id: 'enormous', color: 'navy', meaning: 'å·¨å¤§çš„', words: ['Enormous', 'Immense', 'Massive', 'Tremendous'] },
            { id: 'situation', color: 'teal', meaning: 'æƒ…æ³', words: ['Situation', 'Condition', 'Circumstances', 'Scenario'] },
            { id: 'Amend', color: 'coral', meaning: 'ç›¸ä¼¼', words: [{ t: 'Amend', m: 'ä¿®æ”¹(æ–‡ä»¶)' }, { t: 'Modify', m: 'èª¿æ•´' }, { t: 'Adjust ', m: 'èª¿ç¯€' }, { t: 'Tune', m: 'å¾®èª¿(å·¥å…·)' }] },
            { id: 'tackle', color: 'cornflowerblue', meaning: 'æ‡‰è©²/è™•ç†', words: ['Handle', 'tackle', 'deal with', 'cope with', 'address'] },
            { id: 'unprecedented', color: '#e67e22', meaning: 'å‰æ‰€æœªæœ‰', words: ['More than ever', 'Unprecedented'] },
            { id: 'proliferate', color: 'aquamarine', meaning: 'æ¿€å¢',words: [{ t: 'soar', m: 'æ€¥å‡' }, { t: 'Skyrocket', m: 'é£›æ¼²' }, { t: 'Proliferate', m: 'æ¿€å¢' }, { t: 'Mushroom', m: 'å¤§é‡å¢åŠ ' }, { t: 'spring up', m: 'æ¹§ç¾' }, { t: 'sprout', m: 'æ¹§ç¾(å¼·èª¿æ–°å‡ºç¾)' }, { t: 'Shoot up', m: 'æ€¥é€Ÿå¢åŠ ' }] },

            { id: 'Deteriorate', color: 'darkblue', meaning: 'æƒ¡åŒ–', words: [{ t: 'Deteriorate', m: 'æƒ¡åŒ–(ä¸+n)' }, { t: 'Aggravate', m: 'æƒ¡åŒ–(+n)' }, { t: 'Exacerbate', m: 'æƒ¡åŒ–(+n)' }, { t: 'Worsen ', m: 'æƒ¡åŒ–(+n/ä¸+n)' }] },
{ 
                id: 'extraordinary', color: '#e74c3c', meaning: 'å‡ºçœ¾ / å‚‘å‡º', 
                words: ['Extraordinary', 'Exceptional', 'Outstanding', 'Remarkable'] 
            },
            { 
                id: 'headwind', color: '#8e44ad', meaning: 'é›£é—œ / é€†å¢ƒ', 
                words: [{t:'Headwind', m:'é›£é—œ(é€†å¢ƒ)'}, {t:'Uphill battle', m:'é›£é—œ(ç¡¬ä»—)'}, {t:'Obstacle', m:'éšœç¤™'}] 
            },
            { 
                id: 'harness', color: '#2980b9', meaning: 'é§•é¦­ / æ§åˆ¶', 
                words: ['Harness', 'Manipulate', 'Control', 'Utilize'] 
            },
            { 
                id: 'spur', color: '#27ae60', meaning: 'åˆºæ¿€ / æ¿€å‹µ', 
                words: ['Spur', 'Stimulate', 'Prompt', 'Propel'] 
            },
            { 
                id: 'exponential', color: '#d35400', meaning: 'å·¨å¤§çš„ / æ€¥åŠ‡çš„', 
                words: ['Exponential', 'Drastic', 'Significant', 'Tremendous'] 
            },
            { 
                id: 'optimism', color: '#f1c40f', meaning: 'æ¨‚è§€', 
                words: ['Optimism', 'Positivity', 'Hopefulness'] 
            },
            { 
                id: 'pressing', color: '#c0392b', meaning: 'è¿«åœ¨çœ‰ç«', 
                words: ['Pressing', 'Looming', 'Imminent', 'Urgent'] 
            },
            { 
                id: 'fulfil', color: '#16a085', meaning: 'æ»¿è¶³', 
                words: ['Fulfil', 'Satisfy''] 
            },
                        { 
                id: 'meet', color: '#46a085', meaning: 'é”åˆ°', 
                words: ['Meet', 'Come up to'] 
            },
            { 
                id: 'strategy', color: '#2c3e50', meaning: 'ç­–ç•¥', 
                words: [{t:'Strategy', m:'æˆ°ç•¥(é•·é )'}, {t:'Tactic', m:'æˆ°è¡“(çŸ­æœŸ)'}] 
            },
            { 
                id: 'grasp', color: '#e67e22', meaning: 'æŠ“ç·Š / æŠŠæ¡', 
                words: ['Grasp', 'Seize', 'Grab'] 
            },
            { 
                id: 'operate', color: '#34495e', meaning: 'ç¶“ç‡Ÿ / é‹ä½œ', 
                words: ['Operate', 'Run'] 
            },
            { 
                id: 'drive', color: '#2980b9', meaning: 'é©…ä½¿', 
                words: ['Drive', 'Prompt'] 
            },
            { 
                id: 'convert', color: '#27ae60', meaning: 'è½‰è®Šç‚º', 
                words: ['Convert into', 'Transform into', 'Turn into'] 
            },
                        { 
                id: 'the same', color: '#8c0ff1 ', meaning: 'ä¸€æ¨¡ä¸€æ¨£', 
                words: ['Homogeneous', 'The same', 'Identical'] 
            },
            { 
                id: 'transmit', color: '#1abc9c', meaning: 'å‚³é / å‚³æ’­', 
                words: [
                    {t:'Transmit', m:'å‚³é(è¨Šè™Ÿ)'}, 
                    {t:'Deliver', m:'å‚³é(è²¨ç‰©)'}, 
                    {t:'Convey', m:'å‚³é”(æ„æ€)'}, 
                    {t:'Impart', m:'åˆ†äº«(çŸ¥è­˜)'}, 
                    {t:'Spread', m:'å‚³æ’­'}
                ] 
            },
            { 
                id: 'collective', color: '#9b59b6', meaning: 'å…±åŒçš„', 
                words: ['Collective', 'Concerted', 'Joint'] 
            },
            { 
                id: 'limit', color: '#c0392b', meaning: 'é™åˆ¶', 
                words: ['Limit', 'Constrain', 'Restrict', 'Confine'] 
            },
            { 
                id: 'change', color: '#f39c12', meaning: 'æ”¹è®Š (ç¨‹åº¦)', 
                words: [
                    {t:'Transform', m:'æ”¹è®Š(å¤§)'}, 
                    {t:'Evolve', m:'é€²åŒ–(ç§‘æŠ€)'}, 
                    {t:'Advance', m:'é€²æ­¥(ç§‘æŠ€)'}, 
                    {t:'Alter', m:'æ”¹è®Š(å°)'}, 
                    {t:'Shift', m:'è½‰è®Š/è½‰ç§»'}
                ] 
            },
            { 
                id: 'meanwhile', color: '#7f8c8d', meaning: 'èˆ‡æ­¤åŒæ™‚', 
                words: ['Meanwhile', 'In the meantime', 'At the same time'] 
            },
            { 
                id: 'implication', color: '#34495e', meaning: 'æš—ç¤º / å½±éŸ¿', 
                words: ['Implication', 'Suggestion', 'Insinuation', 'Consequence'] 
            },
            { 
                id: 'prosper', color: '#c40ff1', meaning: 'ç¹ç››', 
                words: ['Lethal', 'Fatal', 'Deadly'] 
            },
                        { 
                id: 'deadly', color: '#d40ff1', meaning: 'è‡´å‘½çš„', 
                words: ['Thrive', 'Flourish', 'Prosper'] 
            },
            { 
                id: 'boom', color: '#f1c40f', meaning: 'å¿«é€Ÿç™¼å±•', 
                words: ['Boom', 'Burgeon'] 
            },
                    { 
                id: 'act as', color: '#b1c40f', meaning: 'ä½œç‚º', 
                words: ['Act as', 'Serve as'] 
            },
                                { 
                id: 'firm', color: '#0f74f1', meaning: 'å…¬å¸/æ©Ÿæ§‹', 
                words: [
                    {t:'Company', m:'å…¬å¸'}, 
                    {t:'Firm', m:'å…¬å¸(å°ˆæ¥­)'}, 
                    {t:'Enterprise', m:'ä¼æ¥­'}, 
                    {t:'Agency', m:'ä¸­ä»‹å…¬å¸'}, 
                    {t:'Corporation', m:'å¤§ä¼æ¥­'},
                    {t:'Establishment', m:'æ©Ÿæ§‹'},
                    {t:'Institute', m:'æ©Ÿæ§‹'},
                    {t:'Institution', m:'æ©Ÿæ§‹'},
                ] 
            },
                               { 
                id: 'as if', color: '#0fe5f1', meaning: 'å½·å½¿', 
                words: ['as if', 'as though'] 
            },
            { 
                id: 'alternative', color: '#16a085', meaning: 'å¦ä¸€é¸æ“‡', 
                words: ['Alternative', 'Substitute'] 
            },
            { 
                id: 'beyond', color: '#8e44ad', meaning: 'ä¸å–®åª / è¶…è¶Š', 
                words: ['Beyond', 'More than', 'Other than', 'On top of'] 
            },
            { 
                id: 'emerge', color: '#e67e22', meaning: 'å‡ºç¾', 
                words: [
                    {t:'Emerge', m:'å‡ºç¾'}, 
                    {t:'Appear', m:'å‡ºç¾'}, 
                    {t:'Arise', m:'å‡ºç¾'}, 
                    {t:'Surface', m:'æµ®ç¾'}
                ] 
            },
            { 
                id: 'undermine', color: '#c0392b', meaning: 'ç ´å£ / æå®³', 
                words: [
                    {t:'Undermine', m:'ç ´å£(æš—ä¸­/æ…¢)'}, 
                    {t:'Take a toll on', m:'é€ æˆæå¤±(æ³›ç”¨)'}, 
                    {t:'Deal a blow to', m:'æ‰“æ“Š(çªç„¶)'}, 
                    {t:'Wreak havoc on', m:'æµ©åŠ«(å¤§ç ´å£)'}, 
                    {t:'Damage', m:'æå®³'}
                ] 
            },
            { 
                id: 'essential', color: '#2ecc71', meaning: 'å¿…è¦ / å¼·åˆ¶', 
                words: [
                    {t:'Essential', m:'å¿…è¦'}, 
                    {t:'Necessary', m:'å¿…è¦'}, 
                    {t:'Compulsory', m:'å¼·åˆ¶'}
                ] 
            },
            { 
                id: 'approx', color: '#bdc3c7', meaning: 'å¤§ç´„ / å¹¾ä¹', 
                words: ['Roughly', 'Approximately', 'Almost', 'Around'] 
            },
            { 
                id: 'mitigate', color: '#3498db', meaning: 'èˆ’ç·© / æ¸›è¼•', 
                words: ['Mitigate', 'Relieve', 'Alleviate', 'Ease', 'Allay'] 
            },
            { 
                id: 'achieve', color: '#f39c12', meaning: 'é”æˆ', 
                words: ['Achieve', 'Attain', 'Accomplish'] 
            },
            { 
                id: 'accusation', color: '#e74c3c', meaning: 'æŒ‡æ§ / èµ·è¨´', 
                words: [
                    {t:'Accusation', m:'æŒ‡æ§'}, 
                    {t:'Prosecution', m:'æª¢æ§'}, 
                    {t:'Charge', m:'èµ·è¨´'}
                ] 
            },
                        { 
                id: 'disastrous', color: '#f18c0f', meaning: 'ç½é›£çš„', 
                words: [
                    {t:'Disastrous', m:'ç½é›£æ€§çš„'}, 
                    {t:'Catastrophic', m:'æ¥µç½é›£æ€§çš„'}, 
                    {t:'Devastating', m:'æ¯€æ»…æ€§çš„'}
                ] 
            },
            { 
                id: 'similarly', color: '#9b59b6', meaning: 'åŒæ¨£åœ°', 
                words: ['Similarly', 'Likewise'] 
            },
            { 
                id: 'appealing', color: '#e91e63', meaning: 'å¸å¼•çš„', 
                words: ['Appealing', 'Captivating', 'Attractive', 'Engaging'] 
            },
            { 
                id: 'wise', color: '#1abc9c', meaning: 'è°æ˜ / æ˜æ™º', 
                words: ['Wise', 'Intelligent', 'Witty'] 
            },
            { 
                id: 'customer', color: '#34495e', meaning: 'é¡§å®¢ / å®¢æˆ¶', 
                words: [
                    {t:'Customer', m:'é¡§å®¢'}, 
                    {t:'Client', m:'å®¢æˆ¶(å°ˆæ¥­)'}, 
                    {t:'Consumer', m:'æ¶ˆè²»è€…'}, 
                    {t:'Patron', m:'å¸¸å®¢/è´ŠåŠ©äºº'},
                    {t:'Frequenter', m:'å¸¸å®¢'}
                ] 
            },
            { 
                id: 'affordable', color: '#27ae60', meaning: 'å¯è² æ“” / å¯¦æƒ ', 
                words: ['Affordable', 'Economical', 'Budget-friendly'] 
            },
            { 
                id: 'worthwhile', color: '#f39c12', meaning: 'å€¼å¾—', 
                words: ['Worthwhile', 'Worthy'] 
            },
            { 
                id: 'struggle', color: '#c0392b', meaning: 'é›£ä»¥ / æ™æ‰', 
                words: ['Struggle to', 'Find it difficult', 'Have trouble'] 
            },
{ 
                id: 'vulnerable', 
                color: '#e74c3c', // Red
                meaning: 'æ˜“å—...å‚·å®³', 
                words: [
                    { t: 'Vulnerable to', m: 'æ˜“å—å‚·å®³' },
                    { t: 'Susceptible to', m: 'æ˜“å—å½±éŸ¿' },
                    { t: 'Prone to', m: 'å‚¾å‘æ–¼(è² é¢)' }
                ] 
            },
            // --- Group 2: éˆä¸¹å¦™è—¥ ---
            { 
                id: 'elixir', 
                color: '#f1c40f', // Gold
                meaning: 'éˆä¸¹å¦™è—¥', 
                words: ['Elixir', 'Panacea'] 
            },
            // --- Group 3: æ„›å¥½è€… ---
            { 
                id: 'fan', 
                color: '#e67e22', // Orange
                meaning: 'ç†±æ„›è€…', 
                words: [
                    { t: 'Fan', m: 'ç²‰çµ²' },
                    { t: 'Enthusiast', m: 'ç™¼ç‡’å‹' },
                    { t: 'Fanatic', m: 'ç‹‚ç†±è€…' }
                ] 
            },
            // --- Group 4: å¤§ç´„ ---
            { 
                id: 'approx', 
                color: '#95a5a6', // Gray
                meaning: 'å¤§ç´„', 
                words: ['Approximately', 'Roughly', 'Around', 'About'] 
            },
            // --- Group 5: å¹¾ä¹ ---
            { 
                id: 'almost', 
                color: '#7f8c8d', // Dark Gray
                meaning: 'å¹¾ä¹', 
                words: [
                    { t: 'Almost', m: 'å¹¾ä¹' },
                    { t: 'Virtually', m: 'å¹¾ä¹/äº‹å¯¦ä¸Š' }
                ] 
            },
            // --- Group 6: è¶³å¤  (åŸºæœ¬) ---
            { 
                id: 'enough', 
                color: '#2ecc71', // Emerald
                meaning: 'è¶³å¤ ', 
                words: ['Enough', 'Sufficient', 'Adequate'] 
            },
            // --- Group 7: å……è¶³ (è±å¯Œ) ---
            { 
                id: 'plenty', 
                color: '#27ae60', // Green
                meaning: 'å……è¶³ / è±å¯Œ', 
                words: [
                    { t: 'Plenty', m: 'å¤§é‡' },
                    { t: 'Plentiful', m: 'å……è¶³' },
                    { t: 'Ample', m: 'å……è£•' },
                    { t: 'Abundant', m: 'è±å¯Œ' }
                ] 
            },
            // --- Group 8: é è¨ˆ ---
            { 
                id: 'expect', 
                color: '#3498db', // Blue
                meaning: 'é è¨ˆ / é æ¸¬', 
                words: [
                    { t: 'Expect', m: 'é æœŸ' },
                    { t: 'Predict', m: 'é æ¸¬' },
                    { t: 'Anticipate', m: 'é æ–™' },
                    { t: 'Project', m: 'æ¨ç®—' },
                    { t: 'Foresee', m: 'é è¦‹' }
                ] 
            },
            // --- Group 9: å¤§å¹…åº¦ ---
            { 
                id: 'significant', 
                color: '#c0392b', // Dark Red
                meaning: 'å¤§å¹…åº¦ / é¡¯è‘—', 
                words: [
                    { t: 'Significant', m: 'é¡¯è‘—' },
                    { t: 'Substantial', m: 'å¯è§€çš„' },
                    { t: 'Drastic', m: 'æ¿€çƒˆçš„' },
                    { t: 'Radical', m: 'å¾¹åº•çš„' },
                    { t: 'Remarkable', m: 'éå‡¡çš„' }
                ] 
            },
            // --- Group 10: åè€Œ/ç›¸å ---
            { 
                id: 'instead', 
                color: 'darkgoldenrod', 
                meaning: 'åè€Œ / ç›¸å', 
                words: [
                    { t: 'Instead', m: 'ä½œç‚ºæ›¿ä»£' },
                    { t: 'Rather', m: 'åè€Œ' },
                    { t: 'In contrast', m: 'ç›¸æ¯”ä¹‹ä¸‹' },
                    { t: 'On the contrary', m: 'æ­£æ­£ç›¸å' }
                ] 
            },
            // --- Group 11: èˆ‡...æœ‰é—œ ---
            { 
                id: 'related', 
                color: 'darkcyan',
                meaning: 'èˆ‡...æœ‰é—œ', 
                words: [
                    { t: 'Associated with', m: 'æœ‰é—œè¯' },
                    { t: 'Linked to', m: 'æœ‰è¯ç¹«' },
                    { t: 'Related to', m: 'æœ‰é—œä¿‚' },
                    { t: 'Has to do with', m: 'èˆ‡..æœ‰é—œ' }
                ] 
            },
            // --- Group 12: æ¨¡ç³Š ---
            { 
                id: 'blurry', 
                color: '#607d8b', // Blue Grey
                meaning: 'æ¨¡ç³Š', 
                words: [
                    { t: 'Blurry', m: 'æ¨¡ç³Š(è¦–è¦º)' },
                    { t: 'Vague', m: 'å«ç³Š(æŠ½è±¡)' },
                    { t: 'Ambiguous', m: 'æ¨¡ç¨œå…©å¯' }
                ] 
            },
            // --- Group 13: æœ‰çˆ­è­°æ€§ ---
            { 
                id: 'controversial', 
                color: '#d35400', // Pumpkin
                meaning: 'æœ‰çˆ­è­°æ€§', 
                words: [
                    { t: 'Controversial', m: 'å…·çˆ­è­°æ€§' },
                    { t: 'Disputable', m: 'æœ‰å•†æ¦·é¤˜åœ°' },
                    { t: 'Debatable', m: 'å¯è¾¯è«–çš„' },
                    { t: 'Contentious', m: 'å¼•èµ·çˆ­è«–çš„' }
                ] 
            },
            // --- Group 14: å¾ˆå¤š ---
            { 
                id: 'numerous', 
                color: '#f39c12', // Orange
                meaning: 'å¾ˆå¤š', 
                words: [
                    { t: 'Numerous', m: 'çœ¾å¤š(å¯æ•¸)' },
                    { t: 'A myriad of', m: 'ç„¡æ•¸(å¯æ•¸)' },
                    { t: 'A plethora of', m: 'å¤šä¸å‹æ•¸(å¯æ•¸)' },
                    { t: 'A host of', m: 'è¨±å¤š(å¯æ•¸)' },
                    { t: 'A good many', m: 'å¾ˆå¤š(å¯æ•¸,å£èª)' },
                    { t: 'Quite a few', m: 'ç›¸ç•¶å¤š(å¯æ•¸)' },
                    { t: 'A great deal of', m: 'å¤§é‡(ä¸å¯æ•¸)' },
                    { t: 'A wealth of', m: 'å¤§é‡(æè±¡åè©)' },
                ] 
            },
            // --- Group 15: ç‰¹è³ª (åˆ†äººèˆ‡ç‰©) ---
            { 
                id: 'trait', 
                color: '#8e44ad', // Wisteria
                meaning: 'ç‰¹è³ª / ç‰¹å¾µ', 
                words: [
                    { t: 'Nature', m: 'æœ¬è³ª(ç‰©)' },
                    { t: 'Characteristics', m: 'ç‰¹å¾µ(ç‰©)' },
                    { t: 'Property', m: 'å±¬æ€§(ç‰©)' },
                    { t: 'Attribute', m: 'ç‰¹è³ª(ç‰©)' },
                    { t: 'Trait', m: 'ç‰¹å¾µ(äºº)' },
                    { t: 'Character', m: 'æ€§æ ¼(äºº)' }
                ] 
            },
            // --- Group 16: å±•ç¤º/é¡¯ç¤º ---
            { 
                id: 'show', 
                color: '#2980b9', // Belize Hole
                meaning: 'å±•ç¤º/é¡¯ç¤º', 
                words: [
                    { t: 'Display', m: 'å±•ç¤º(ç‰©å“)' },
                    { t: 'Demonstrate', m: 'å±•ç¤º(æè±¡)' },
                    { t: 'Reveal', m: 'é¡¯ç¤º' },
                    { t: 'Indicate', m: 'é¡¯ç¤º(æ•¸å­—)' },
                    { t: 'Exhibit', m: 'å±•ç¤º(ç‰©å“)' },
                    { t: 'Showcase', m: 'å±•ç¤º' }
                ] 
            },
            // --- Group 18: æ•™å ‚ (åˆ†å¤§å°) ---
            { 
                id: 'church', 
                color: '#8e44ad', // Purple
                meaning: 'æ•™å ‚ (åˆ†å¤§å°)', 
                words: [
                    { t: 'Chapel', m: 'å°æ•™å ‚/ç¦®æ‹œå ‚' },
                    { t: 'Church', m: 'æ•™å ‚(ä¸­)' },
                    { t: 'Cathedral', m: 'å¤§æ•™å ‚' },
                    { t: 'Basilica', m: 'å®—åº§è–æ®¿(è¶…å¤§)' }
                ] 
            },
            // --- Group 19: å¯ºå»Ÿ/å®—æ•™å ´æ‰€ ---
            { 
                id: 'temple', 
                color: 'darkmagenta', // Red
                meaning: 'å¯ºå»Ÿ / è–åœ°', 
                words: [
                    { t: 'Shrine', m: 'ç¥ç¤¾/ç¥é¾•(å°)' },
                    { t: 'Temple', m: 'å¯ºå»Ÿ' },
                    { t: 'Monastery', m: 'ä¿®é“é™¢/åƒ§é™¢' },
                    { t: 'Mosque', m: 'æ¸…çœŸå¯º' }
                ] 
            },
            // --- Group 20: è¿…é€Ÿ ---
            { 
                id: 'rapid', 
                color: '#e67e22', // Carrot
                meaning: 'è¿…é€Ÿ', 
                words: [
                    { t: 'Rapid', m: 'è¿…é€Ÿ(æ”¹è®Š)' },
                    { t: 'Swift', m: 'è¿…é€Ÿ(ç§»å‹•)' },
                    { t: 'Prompt', m: 'è¿…é€Ÿ(åæ‡‰)' }
                ] 
            },
            // --- Group 21: å®£ä½ˆ ---
            { 
                id: 'declare', 
                color: '#34495e', // Wet Asphalt
                meaning: 'å®£ä½ˆ', 
                words: [
                    { t: 'Declare', m: 'å®£ä½ˆ(æ­£å¼)' },
                    { t: 'Announce', m: 'å®£ä½ˆ' }
                ] 
            },
           { 
                id: 'utter', 
                color: 'darkkhaki',
                meaning: 'èªª', 
                words: [
                    { t: 'stress', m: 'å¼·èª¿èªª' },
                    { t: 'utter', m: 'èªª' },
                    { t: 'state', m: 'èªª' },
                    { t: 'remark', m: 'èªª(æ­£å¼)' }
                ] 
            },
            // --- Group 22: ç™¼ç”Ÿ ---
            { 
                id: 'happen', 
                color: '#16a085', // Green Sea
                meaning: 'ç™¼ç”Ÿ', 
                words: ['Happen', 'Occur', 'Take place', 'Arise'] 
            },
            // --- Group 23: é©…ä½¿/ä¿ƒé€² ---
            { 
                id: 'foster', 
                color: '#27ae60', // Nephritis
                meaning: 'ä¿ƒé€² / é©…ä½¿', 
                words: [
                    { t: 'Drive', m: 'é©…ä½¿' },
                    { t: 'Prompt', m: 'ä¿ƒä½¿' },
                    { t: 'Foster', m: 'åŸ¹é¤Š/ä¿ƒé€²' },
                    { t: 'Facilitate', m: 'ä¿ƒé€²/ä½¿ä¾¿åˆ©' },
                    { t: 'Promote', m: 'æ¨å»£/ä¿ƒé€²' }
                ] 
            },
            // --- Group 24: é¦™å‘³/æ°£å‘³ ---
            { 
                id: 'smell', 
                color: '#d2527f', // Pink
                meaning: 'é¦™å‘³', 
                words: [
                    { t: 'Aroma', m: 'é¦™æ°£(é£Ÿç‰©)' },
                    { t: 'Fragrance', m: 'èŠ¬èŠ³(é¦™æ°´/èŠ±)' },
                    { t: 'Scent', m: 'æ°£å‘³(ä¸­æ€§/å¥½)' }
                ] 
            },
            // --- Group 25: é–‹å¿ƒ ---
            { 
                id: 'joy', 
                color: '#f1c40f', // Sun Flower
                meaning: 'é–‹å¿ƒ / å–œæ‚…', 
                words: ['Pleasure', 'Delight', 'Joy', 'Glee'] 
            },
            // --- Group 26: å› æ­¤ ---
            { 
                id: 'therefore', 
                color: '#7f8c8d', // Concrete
                meaning: 'å› æ­¤', 
                words: ['Thus', 'Hence', 'Therefore'] 
            },
            // --- Group 27: ç†±è¡·æ–¼ ---
            { 
                id: 'enthusiastic', 
                color: '#e74c3c', // Alizarin
                meaning: 'ç†±è¡·æ–¼', 
                words: [
                    { t: 'Enthusiastic about', m: 'ç†±è¡·' },
                    { t: 'Passionate about', m: 'å……æ»¿ç†±èª ' },
                    { t: 'Keen to', m: 'æ¸´æœ›/ç†±è¡·' }
                ] 
            },
            // --- Group 28: ç¦æ­¢ ---
            { 
                id: 'ban', 
                color: '#c0392b', // Old Brick
                meaning: 'ç¦æ­¢', 
                words: ['Forbid', 'Ban', 'Bar', 'Prohibit'] 
            },
            // --- Group 29: æ„è­˜åˆ° ---
            { 
                id: 'aware', 
                color: '#2980b9', // Blue
                meaning: 'æ„è­˜åˆ°', 
                words: [
                    { t: 'Be aware of', m: 'æ„è­˜åˆ°' },
                    { t: 'Realise', m: 'æ„è­˜åˆ°/å¯¦ç¾' },
                    { t: 'Be conscious of', m: 'å¯Ÿè¦ºåˆ°' }
                ] 
            },
            // --- Group 30: å¦å¤– ---
            { 
                id: 'addition', 
                color: '#8e44ad', // Purple
                meaning: 'å¦å¤– / æ­¤å¤–', 
                words: ['In addition', 'Furthermore', 'Moreover', 'Besides', 'On top of that', 'Plus'] 
            },
            // --- Group 31: æ˜é¡¯ ---
            { 
                id: 'obvious', 
                color: '#f39c12', // Orange
                meaning: 'æ˜é¡¯', 
                words: ['Obvious', 'Apparent', 'Evident', 'Conspicuous', 'Clear'] 
            },
            // --- Group 32: é©æ‡‰ ---
            { 
                id: 'adapt', 
                color: '#2ecc71', // Green
                meaning: 'é©æ‡‰', 
                words: [
                    { t: 'Adapt to', m: 'é©æ‡‰' },
                    { t: 'Get used to', m: 'ç¿’æ…£' },
                    { t: 'Get accustomed to', m: 'ç¿’æ…£æ–¼' }
                ] 
            },
            // --- Group 33: æ¡ç”¨/å¯¦æ–½ ---
            { 
                id: 'adopt', 
                color: '#34495e', // Navy
                meaning: 'æ¡ç”¨ / å¯¦æ–½', 
                words: [
                    { t: 'Adopt', m: 'æ¡ç”¨' },
                    { t: 'Introduce', m: 'å¼•å…¥' },
                    { t: 'Launch', m: 'æ¨è¡Œ' },
                    { t: 'Implement', m: 'å¯¦æ–½(è¨ˆåŠƒ)' },
                    { t: 'Impose', m: 'å¼·åˆ¶å¯¦æ–½(-)' }
                ] 
            },
            // --- Group 34: å¯è¡Œçš„ ---
            { 
                id: 'feasible', 
                color: '#27ae60', // Green
                meaning: 'å¯è¡Œçš„', 
                words: ['Feasible', 'Viable', 'Workable'] 
            }
        ];

        // --- éŠæˆ²è®Šæ•¸ ---
        let hasFlippedCard = false, lockBoard = false;
        let firstCard, secondCard, matchedPairs = 0;
        let lives = 10, timer, timeLimit = 100, remainingTime = 100;
        let currentLevel = 1, totalScore = 0;
        
        // ğŸ”¥ æ–°å¢è®Šæ•¸ï¼šé…å°æ± 
        let globalPairDeck = []; 

        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        // --- ç™»å…¥ç³»çµ±é‚è¼¯ ---
        function checkLoginStatus() {
            const savedUser = localStorage.getItem('synonym_player');
            if (savedUser) {
                currentPlayer = savedUser;
                showGameUI();
                backToLobby();
            } else {
                document.getElementById('loginModal').classList.remove('hidden');
            }
        }

        function handleLogin() {
            const inputName = document.getElementById('loginNameInput').value.trim();
            const loginBtn = document.querySelector('.btn-login');

            if (!inputName) { alert("è«‹è¼¸å…¥åå­—"); return; }
            if (inputName.length > 12) { alert("åå­—å¤ªé•·å•¦ (é™12å­—)"); return; }
            if (!db) { alert("âŒ è³‡æ–™åº«æœªé€£æ¥"); return; }

            const originalText = loginBtn.innerText;
            loginBtn.innerText = "é€£ç·šä¸­...";
            loginBtn.disabled = true;

            db.ref(USERS_PATH + '/' + inputName).once('value')
            .then(snapshot => {
                if (snapshot.exists()) {
                    const confirmLogin = confirm(`åå­— "${inputName}" å·²å­˜åœ¨ã€‚æ˜¯æœ¬äººè«‹æŒ‰ç¢ºå®šï¼Œå¦å‰‡è«‹æ”¹åã€‚`);
                    if (confirmLogin) loginSuccess(inputName);
                    else { loginBtn.innerText = originalText; loginBtn.disabled = false; }
                } else {
                    db.ref(USERS_PATH + '/' + inputName).set({ createdAt: firebase.database.ServerValue.TIMESTAMP })
                    .then(() => { alert(`é¡˜ä½ èˆ‡é¬¼ç‹åŒåœ¨ï¼${inputName}ï¼`); loginSuccess(inputName); });
                }
            })
            .catch(error => {
                alert("âŒ é€£ç·šéŒ¯èª¤: " + error.message);
                loginBtn.innerText = originalText; loginBtn.disabled = false;
            });
        }

        function loginSuccess(name) {
            currentPlayer = name;
            localStorage.setItem('synonym_player', name); 
            document.getElementById('loginModal').classList.add('hidden');
            showGameUI();
            backToLobby(); 
        }

        function logout() {
            if(confirm("ç¢ºå®šè¦ç™»å‡ºå—ï¼Ÿ")) {
                localStorage.removeItem('synonym_player');
                location.reload(); 
            }
        }

        function showGameUI() {
            document.getElementById('userPanel').style.display = 'flex';
            document.getElementById('currentUserDisplay').innerText = currentPlayer;
            document.getElementById('loginModal').classList.add('hidden'); 
        }

        // --- éŸ³æ•ˆ ---
        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const now = audioCtx.currentTime;
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain); gain.connect(audioCtx.destination);

            if (type === 'flip') {
                osc.type = 'sine'; osc.frequency.setValueAtTime(500, now); osc.frequency.exponentialRampToValueAtTime(100, now + 0.1);
                gain.gain.setValueAtTime(0.05, now); gain.gain.exponentialRampToValueAtTime(0.001, now + 0.1);
                osc.start(now); osc.stop(now + 0.1);
            } else if (type === 'match') {
                osc.type = 'triangle'; osc.frequency.setValueAtTime(523.25, now); osc.frequency.setValueAtTime(659.25, now + 0.1);
                gain.gain.setValueAtTime(0.1, now); gain.gain.linearRampToValueAtTime(0, now + 0.3);
                osc.start(now); osc.stop(now + 0.3);
            } else if (type === 'fail') {
                osc.type = 'sawtooth'; osc.frequency.setValueAtTime(150, now); osc.frequency.linearRampToValueAtTime(100, now + 0.2);
                gain.gain.setValueAtTime(0.1, now); gain.gain.linearRampToValueAtTime(0, now + 0.3);
                osc.start(now); osc.stop(now + 0.3);
            } else if (type === 'victory') {
                [523.25, 659.25, 783.99, 1046.50].forEach((freq, i) => {
                    const o = audioCtx.createOscillator(); const g = audioCtx.createGain();
                    o.connect(g); g.connect(audioCtx.destination);
                    o.type = 'square'; o.frequency.value = freq;
                    g.gain.setValueAtTime(0.05, now + i*0.1); g.gain.exponentialRampToValueAtTime(0.001, now + i*0.1 + 0.4);
                    o.start(now + i*0.1); o.stop(now + i*0.1 + 0.4);
                });
            } else if (type === 'gameover') {
                osc.type = 'triangle'; osc.frequency.setValueAtTime(300, now); osc.frequency.linearRampToValueAtTime(100, now + 1.5);
                gain.gain.setValueAtTime(0.2, now); gain.gain.linearRampToValueAtTime(0, now + 1.5);
                osc.start(now); osc.stop(now + 1.5);
            }
        }

        function speakWord(text) {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                const u = new SpeechSynthesisUtterance(text);
                u.lang = 'en-US'; u.rate = 0.9;
                window.speechSynthesis.speak(u);
            }
        }

        // --- éŠæˆ²é‚è¼¯ ---
        
        // å·¥å…·ï¼šå°‡æ‰€æœ‰ç”Ÿå­—è½‰åŒ–ç‚ºç¨ç«‹é…å°
        function generateMasterDeck() {
            let tempDeck = [];
            
            synonymData.forEach(g => {
                let ws = g.words.map(w => (typeof w === 'string') ? {t:w, m:g.meaning} : {t:w.t, m:w.m});
                ws.sort(() => 0.5 - Math.random()); // æ‰“äº‚çµ„å…§

                // å…©å…©é…å°
                for (let i = 0; i < ws.length - 1; i += 2) {
                    tempDeck.push({ i1: ws[i], i2: ws[i+1], gid: g.id, c: g.color });
                }
            });
            return tempDeck.sort(() => 0.5 - Math.random()); // æ´—äº‚å¤§æ± 
        }
        
        function initGame(isNextLevel = false) {
            if (!currentPlayer) return; 

            const grid = document.getElementById('gameGrid');
            grid.innerHTML = '';
            hasFlippedCard = false; lockBoard = false; firstCard = null; secondCard = null; matchedPairs = 0;
            
            if (!isNextLevel) { 
                currentLevel = 1; 
                totalScore = 0; 
                lives = 10; 
                globalPairDeck = generateMasterDeck(); // é–‹æ–°å±€ï¼Œæ´—ç‰Œ
            } else { 
                currentLevel++; 
                lives = Math.min(lives + 3, 10); 
            }

            // é˜²ç¦¦ï¼šå¦‚æœä¸å¤ ç‰Œï¼ŒåŠ æ–°ç‰Œ
            if (globalPairDeck.length < 8) {
                globalPairDeck = globalPairDeck.concat(generateMasterDeck());
            }

            updateUI();
            resetTimer(); startTimer();

            // æŠ½ 8 å°
            const selectedPairs = globalPairDeck.splice(0, 8);

            // æ”¾å…¥ Deck
            let deck = [];
            selectedPairs.forEach(p => {
                deck.push({t:p.i1.t, m:p.i1.m, gid:p.gid, c:p.c}, {t:p.i2.t, m:p.i2.m, gid:p.gid, c:p.c});
            });
            
            deck.sort(()=>0.5-Math.random());

deck.forEach(item => {
                const card = document.createElement('div');
                card.classList.add('card');
                
                // è¨­å®š dataset (ä¿æŒä¸è®Š)
                card.dataset.group = item.gid; 
                card.dataset.word = item.t; 
                card.dataset.color = item.c; 
                card.dataset.failCount = 1;

                // ğŸ”¥ æ–°å¢ï¼šå¼·åˆ¶é¦–å­—æ¯å¤§å¯«çš„é‚è¼¯ ğŸ”¥
                // 1. è™•ç†å–®å­— (Front)ï¼šæ”ç¬¬ä¸€å€‹å­—è½‰å¤§å¯« + æ‹¼ç•ªå‰©ä½å˜…å­—
                const displayWord = item.t.charAt(0).toUpperCase() + item.t.slice(1);
                
                // 2. è™•ç†æç¤ºå­— (Back)ï¼šåªæ”ç¬¬ä¸€å€‹å­—è½‰å¤§å¯«
                const hintLetter = item.t.charAt(0).toUpperCase();

                const textClass = item.t.length > 12 ? 'word-text long-text' : 'word-text';
                
                // ğŸ”¥ æ›´æ–° HTMLï¼šç”¨ displayWord åŒ hintLetter ä»£æ›¿èˆŠè®Šæ•¸
                card.innerHTML = `<div class="card-inner">
                    <div class="card-front">
                        <div class="${textClass}">${displayWord}</div>
                        <div class="meaning-text">${item.m}</div>
                    </div>
                    <div class="card-back">${hintLetter}</div>
                </div>`;
                
                card.addEventListener('click', flipCard);
                grid.appendChild(card);
            });

            setTimeout(() => { if(grid.children.length) grid.children[Math.floor(Math.random()*grid.children.length)].click(); }, 600);
        }

        function updateUI() {
            let h = ""; for(let i=0; i<lives; i++) h+="â¤ï¸";
            const l = document.getElementById('lives');
            l.innerText = h || "ğŸ’€";
            l.className = lives<=2 ? "stat-box low-health" : "stat-box";
            document.getElementById('total-score').innerText = totalScore;
            document.getElementById('level-display').innerText = currentLevel;
        }

        function flipCard() {
            if (lockBoard || this === firstCard) return;
            playSound('flip'); this.classList.add('flipped'); speakWord(this.dataset.word);
            if (!hasFlippedCard) { hasFlippedCard = true; firstCard = this; return; }
            secondCard = this; checkForMatch();
        }

        function checkForMatch() {
            firstCard.dataset.group === secondCard.dataset.group ? disableCards() : unflipCards();
        }

        function disableCards() {
            const c1 = firstCard, c2 = secondCard, color = c1.dataset.color || '#333';
            c1.removeEventListener('click', flipCard); c2.removeEventListener('click', flipCard);

            setTimeout(() => {
                playSound('match'); c1.classList.add('matched'); c2.classList.add('matched');
                [c1, c2].forEach(c => {
                    const f = c.querySelector('.card-front'), w = c.querySelector('.word-text'), m = c.querySelector('.meaning-text');
                    f.setAttribute('style', `background-color:#fff!important; border:3px solid ${color}!important; color:${color}!important; transform:rotateY(180deg); box-shadow:inset 0 0 0 1px ${color}20;`);
                    w.style.color = color; m.style.cssText = `color:${color}!important; opacity:1!important; transform:translateY(0)!important; display:block!important;`;
                });
            }, 300);

            matchedPairs++;
            if (matchedPairs === 8) {
                clearInterval(timer);
                totalScore += remainingTime + (lives * 10);
                document.getElementById('total-score').innerText = totalScore;
                setTimeout(() => {
                    playSound('victory');
                    alert(`ğŸ‰ Level ${currentLevel} Complete! åŠ ç•ª3å€‹â¤ï¸ä¿¾ä½ !\nç¸½åˆ†: ${totalScore}`);
                    initGame(true);
                }, 800);
            }
            resetBoard();
        }

        function unflipCards() {
            lockBoard = true; const c1 = firstCard, c2 = secondCard;
            [c1, c2].forEach(c => {
                let cnt = parseInt(c.dataset.failCount||1)+1; c.dataset.failCount = cnt;
                let w = c.dataset.word, hint = w.substring(0, Math.min(cnt, w.length));
                let b = c.querySelector('.card-back'); b.innerText = hint;
                b.style.fontSize = hint.length>3?'1rem':(hint.length>1?'1.5rem':'2.5rem');
                b.style.background = "linear-gradient(135deg, #5b6ebf 0%, #683e91 100%)";
            });
            lives--; updateUI();
            if (lives === 0) {
                clearInterval(timer);
                setTimeout(() => { playSound('gameover'); autoSubmitScore(); }, 600);
                return;
            }
            setTimeout(() => { playSound('fail'); c1.classList.add('shake'); c2.classList.add('shake'); }, 400);
            setTimeout(() => { c1.classList.remove('flipped','shake'); c2.classList.remove('flipped','shake'); resetBoard(); }, 1200);
        }

        function resetBoard() { [hasFlippedCard, lockBoard] = [false, false]; [firstCard, secondCard] = [null, null]; }
        
        function startTimer() {
            remainingTime = timeLimit; document.getElementById('timer').innerText = remainingTime;
            timer = setInterval(() => {
                remainingTime--; document.getElementById('timer').innerText = remainingTime;
                if (remainingTime <= 0) { clearInterval(timer); playSound('gameover'); autoSubmitScore(); }
            }, 1000);
        }
        function resetTimer() { clearInterval(timer); remainingTime = timeLimit; document.getElementById('timer').innerText = remainingTime; }

        // --- æ’è¡Œæ¦œ (è‡ªå‹•ä¸Šå‚³) ---
        function openRankModal() {
            document.getElementById('rankModal').classList.remove('hidden');
            fetchLeaderboard();
        }

function autoSubmitScore(isSilent = false) {
            if (!currentPlayer) return;
            
            // å¦‚æœ 0 åˆ†ï¼Œç›´æ¥è™•ç† (ä¸æ¶‰åŠæ•¸æ“šåº«)
            if (totalScore === 0) {
                 if (!isSilent) {
                     alert("ğŸ’€ Game Over! \n0åˆ†... ä¸‹æ¬¡åŠªåŠ›ï¼");
                     backToLobby();
                 }
                 return;
            }

            // è®€å–èˆŠåˆ†æ•¸ä¸¦æ¯”è¼ƒ
            db.ref(LEADERBOARD_PATH).orderByChild('name').equalTo(currentPlayer).once('value', snapshot => {
                if (snapshot.exists()) {
                    let key = Object.keys(snapshot.val())[0];
                    let oldScore = snapshot.val()[key].score;
                    
                    if (totalScore > oldScore) {
                        // ç ´ç´€éŒ„ï¼šæ›´æ–°
                        db.ref(LEADERBOARD_PATH + '/' + key).update({
                            score: totalScore,
                            timestamp: firebase.database.ServerValue.TIMESTAMP
                        }).then(() => {
                            if (!isSilent) {
                                alert(`ğŸ’€ Game Over!\næ­å–œåˆ·æ–°ç´€éŒ„ï¼\n(èˆŠ: ${oldScore} -> æ–°: ${totalScore})`);
                                openRankModal();
                                backToLobby();
                            }
                        });
                    } else {
                        // æœªç ´ç´€éŒ„ï¼šåªé€šçŸ¥
                        if (!isSilent) {
                            alert(`ğŸ’€ Game Over!\næœ€çµ‚åˆ†æ•¸: ${totalScore}\n(æœªç ´ç´€éŒ„: ${oldScore})`);
                            openRankModal();
                            backToLobby();
                        }
                    }
                } else {
                    // æ–°ç©å®¶ï¼šç›´æ¥ä¸Šå‚³
                    db.ref(LEADERBOARD_PATH).push({
                        name: currentPlayer,
                        score: totalScore,
                        timestamp: firebase.database.ServerValue.TIMESTAMP
                    }).then(() => {
                        if (!isSilent) {
                            alert(`ğŸ’€ Game Over!\nåˆ†æ•¸å·²ä¸Šå‚³: ${totalScore}`);
                            openRankModal();
                            backToLobby();
                        }
                    });
                }
            });
        }

        function fetchLeaderboard() {
            const listBody = document.getElementById('rankListBody');
            const loading = document.getElementById('loadingRank');
            
            db.ref(LEADERBOARD_PATH).orderByChild('score').limitToLast(100).once('value', snapshot => {
                loading.style.display = 'none';
                listBody.innerHTML = '';
                
                let scores = [];
                snapshot.forEach(child => { scores.push(child.val()); });
                scores.reverse();

                if(scores.length === 0) {
                    listBody.innerHTML = '<tr><td colspan="3" style="text-align:center;">æš«ç„¡ç´€éŒ„</td></tr>';
                    return;
                }

                scores.forEach((s, index) => {
                    const row = document.createElement('tr');
                    row.className = 'rank-row';
                    let rankIcon = index + 1;
                    if(index===0) rankIcon = 'ğŸ¥‡';
                    if(index===1) rankIcon = 'ğŸ¥ˆ';
                    if(index===2) rankIcon = 'ğŸ¥‰';

                    row.innerHTML = `<td><span class="rank-num">${rankIcon}</span></td><td class="rank-name">${s.name}</td><td class="rank-score">${s.score}</td>`;
                    listBody.appendChild(row);
                });
            });
        }

        // --- æœå°‹èˆ‡æº«ç¿’åŠŸèƒ½ ---
        function toggleSearchBar() {
            const wrapper = document.getElementById('searchBarWrapper');
            const input = document.getElementById('studySearchInput');
            wrapper.classList.toggle('open');
            if (wrapper.classList.contains('open')) {
                setTimeout(() => input.focus(), 300);
            } else {
                input.value = '';
                filterStudyList(''); 
            }
        }

        function filterStudyList(term) {
            const container = document.getElementById('studyListContainer');
            const groups = container.querySelectorAll('.study-group');
            groups.forEach(group => {
                const text = group.innerText.toLowerCase();
                group.style.display = (term === '' || text.includes(term.toLowerCase())) ? "block" : "none";
            });
        }

        function openStudyModal() {
            const c = document.getElementById('studyListContainer'); 
            c.innerHTML = ''; 

            document.getElementById('searchBarWrapper').classList.remove('open');
            document.getElementById('studySearchInput').value = '';

            document.getElementById('studySearchInput').oninput = function(e) { filterStudyList(e.target.value); };

            synonymData.forEach(g => {
                const d = document.createElement('div'); 
                d.className = 'study-group'; 
                d.style.borderLeftColor = g.color;
                d.innerHTML = `<div class="study-meaning" style="color:${g.color}">${g.meaning}</div><div class="study-words"></div>`;
                
                const wd = d.querySelector('.study-words');
                
                g.words.forEach(w => {
                    const t = document.createElement('span'); 
                    t.className = 'study-tag'; 
                    let wordToRead = "";
                    if (typeof w === 'string') {
                        t.innerText = w; wordToRead = w;
                    } else {
                        t.innerHTML = `${w.t} <small style="color:#7f8c8d; font-weight:normal; font-size: 0.85em;">(${w.m})</small>`;
                        wordToRead = w.t;
                    }
                    t.onclick = () => {
                        speakWord(wordToRead);
                        t.classList.remove('pop-active'); 
                        void t.offsetWidth;               
                        t.classList.add('pop-active');    
                    };
                    wd.appendChild(t);
                });
                c.appendChild(d);
            });
            document.getElementById('studyModal').classList.remove('hidden');
        }

        // --- å°èˆªèˆ‡ä»‹é¢æ§åˆ¶ ---
        function backToLobby() {
            clearInterval(timer);
            lockBoard = false; hasFlippedCard = false;
            document.getElementById('gameGrid').innerHTML = ''; 
            document.getElementById('startOverlay').style.display = 'block'; 
            document.getElementById('preGameButtons').style.display = 'flex';
            document.getElementById('inGameButtons').style.display = 'none';
            document.getElementById('timer').innerText = timeLimit;
            document.getElementById('lives').innerText = "â¤ï¸â¤ï¸â¤ï¸â¤ï¸â¤ï¸â¤ï¸â¤ï¸â¤ï¸â¤ï¸â¤ï¸";
            lives = 10;
        }
// --- æ–°å¢ï¼šæŒ‰ä¸‹æ”¾æ£„æŒ‰éˆ• ---
    function onGiveUp() {
        if(confirm("ç¢ºå®šè¦æ”¾æ£„éŠæˆ²ä¸¦çµç®—åˆ†æ•¸å—ï¼Ÿ")) {
            // åœæ­¢è¨ˆæ™‚ï¼Œé˜²æ­¢èƒŒæ™¯ç¹¼çºŒæ‰£åˆ†
            clearInterval(timer);
            // æ’­æ”¾ Game Over éŸ³æ•ˆ
            playSound('gameover');
            // ä¸Šå‚³åˆ†æ•¸ (isSilent = falseï¼Œå› ç‚ºå­¸ç”Ÿé‚„åœ¨çœ‹è‘—è¢å¹•ï¼Œè¦çµ¦å›æ‡‰)
            autoSubmitScore(false);
        }
    }

        function startGameSession() {
            document.getElementById('startOverlay').style.display = 'none';
            document.getElementById('preGameButtons').style.display = 'none';
            document.getElementById('inGameButtons').style.display = 'flex';
            initGame(false);
        }

        function closeModal(id) {
            document.getElementById(id).classList.add('hidden');
            if (id === 'rankModal' && lives <= 0) {
                backToLobby();
            }
        }
// --- æ–°å¢ï¼šç•¶å­¸ç”Ÿé—œé–‰ App æˆ–åˆ‡æ›è¦–çª—æ™‚è‡ªå‹•å„²å­˜ ---
        document.addEventListener('visibilitychange', () => {
            if (document.visibilityState === 'hidden') {
                // å¦‚æœéŠæˆ²æ­£åœ¨é€²è¡Œä¸­ (æœ‰ Level ä¸”æœ‰åˆ†æ•¸)
                if (currentLevel > 0 && totalScore > 0 && document.getElementById('inGameButtons').style.display === 'flex') {
                    console.log("App hidden, auto saving score...");
                    // éœé»˜ä¸Šå‚³ (isSilent = true)
                    autoSubmitScore(true);
                }
            }
        });
        // å•Ÿå‹•æ™‚æª¢æŸ¥
        checkLoginStatus();

    </script>
                  
                 
